id: pricing_calculator_box
type: Box
style:
  maxWidth: 1200px
  margin: 60px auto
blocks:
  - id: pricing_calculator_title
    type: Html
    properties:
      html: |
        <h2> Pricing Calculator </h2>

  - id: session_durations
    type: RatingSlider
    properties:
      disableIcons: true
      disableNotApplicable: true
      label:
        inline: true
      showDots: false
      showMarks: false
      title: Average usage per month per user
      min: 1
      max: 10

  - id: monthly_users_lt_30
    type: RatingSlider
    properties:
      disableIcons: true
      disableNotApplicable: true
      label:
        inline: true
      showDots: false
      showMarks: false
      title: Number of monthly users with usage less than 30 hours per month
      min: 1
      max: 1000

  - id: durations_price_calculation
    type: Html
    properties:
      html:
        _nunjucks:
          template: |
            {{ session_durations }} hours * {{ monthly_users_lt_30 }} monthly users < 30 hours * $0.5 = ${{ total }}
          on:
            session_durations:
              _if_none:
                - _state: session_durations
                - 0
            monthly_users_lt_30:
              _if_none:
                - _state: monthly_users_lt_30
                - 0
            total:
              _product:
                - _if_none:
                    - _state: session_durations
                    - 0
                - _if_none:
                    - _state: monthly_users_lt_30
                    - 0
                - 0.5

  - id: monthly_users_gt_30
    type: RatingSlider
    properties:
      disableIcons: true
      disableNotApplicable: true
      label:
        inline: true
      showDots: false
      showMarks: false
      title: Number of monthly users with more than 30 hours per month
      min: 1
      max: 30

  - id: durations_gt_30_price_calculation
    type: Html
    properties:
      html:
        _nunjucks:
          template: |
            $15 * {{ monthly_users_gt_30 }} monthly users > 30 hours = ${{ total }}
          on:
            monthly_users_gt_30:
              _if_none:
                - _state: monthly_users_gt_30
                - 0
            total:
              _product:
                - _if_none:
                    - _state: monthly_users_gt_30
                    - 0
                - 15

  - id: total_price
    type: Html
    properties:
      html:
        _nunjucks:
          template: |
            {% if total > 5000 %}
              Contact Us
            {% else %}
              Total = ${{ total }}
            {% endif %}
          on:
            total:
              _sum:
                - _product:
                    - _if_none:
                        - _state: session_durations
                        - 0
                    - _if_none:
                        - _state: monthly_users_lt_30
                        - 0
                    - 0.5
                - _product:
                    - _if_none:
                        - _state: monthly_users_gt_30
                        - 0
                    - 15
